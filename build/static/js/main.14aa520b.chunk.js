(this["webpackJsonpchart-frontend"]=this["webpackJsonpchart-frontend"]||[]).push([[0],{29:function(t,e,a){"use strict";var n;a.d(e,"a",(function(){return n})),function(t){t[t.NO_STATE=0]="NO_STATE",t[t.FETCH_POINTS=1]="FETCH_POINTS",t[t.FETCH_POINTS_SERVER_ERROR=2]="FETCH_POINTS_SERVER_ERROR",t[t.FETCH_POINTS_SUCCESS=3]="FETCH_POINTS_SUCCESS",t[t.ADD_POINT=4]="ADD_POINT",t[t.ADD_POINT_SERVER_ERROR=5]="ADD_POINT_SERVER_ERROR",t[t.ADD_POINT_SUCCESS=6]="ADD_POINT_SUCCESS"}(n||(n={}))},30:function(t,e){},31:function(t,e){},32:function(t,e){},33:function(t,e){},34:function(t,e){},49:function(t,e,a){},5:function(t,e,a){"use strict";var n=a(29);a.d(e,"AppState",(function(){return n.a}));a(30),a(31),a(32),a(33),a(34)},50:function(t,e,a){},72:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a(1),c=a.n(s),r=a(12),o=a.n(r),i=a(7),l=(a(49),a(50),a(3)),d=a(10),u=a.n(d),m=a(2),h=a(36),j=a.n(h),p=(a(53),{dateTimeFormat:"YYYY-MM-DDTHH:mm:ss.SSS[Z]",timeFormat:"HH:mm:ss.SSS",margins:{top:50,right:100,bottom:50,left:100},width:900,height:350}),x=function(t){var e=t.value,a=t.label,s=t.onChange;return Object(n.jsxs)("div",{"data-test":"component-date-time",className:"form-group mb-0",children:[Object(n.jsx)("label",{"data-test":"date-time-label",children:a}),Object(n.jsx)(j.a,{"data-test":"date-time-element",value:e,inputProps:{className:"form-control"},onChange:function(t){return s(t)},timeFormat:p.timeFormat})]})},b=function(t){var e=t.value,a=t.label,s=t.type,c=t.onChange;return Object(n.jsxs)("div",{"data-test":"component-input",className:"form-group mb-0",children:[Object(n.jsx)("label",{"data-test":"input-label",children:a}),Object(n.jsx)("input",{"data-test":"input-element",type:s,value:e,className:"form-control",onChange:function(t){return c(t.target.value)}})]})},f=function(){return Object(n.jsx)("div",{"data-test":"component-loader",className:"d-flex justify-content-center align-items-center h-100 w-100",children:Object(n.jsx)("div",{className:"spinner-border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})})},O=function(t){var e=t.header,a=t.body,s=t.onClose;return Object(n.jsxs)("div",{"data-test":"component-toast-message",className:"toast show fade bg-danger text-white",role:"alert","aria-live":"assertive","aria-atomic":"true",style:{position:"fixed",right:"5px",bottom:"5px",minWidth:"200px",zIndex:1},children:[Object(n.jsxs)("div",{className:"toast-header bg-danger text-white",children:[Object(n.jsx)("strong",{"data-test":"toast-header",className:"mr-auto",children:e}),Object(n.jsx)("button",{"data-test":"toast-close-button",type:"button",className:"ml-2 mb-1 close text-white","data-dismiss":"toast","aria-label":"Close",onClick:function(){return s()},children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{"data-test":"toast-body",className:"toast-body",children:a})]})},S="ADD_POINT",g="ADD_POINT_SERVER_ERROR",v="ADD_POINT_SUCCESS",y="FETCH_POINTS",T="FETCH_POINTS_SERVER_ERROR",E="FETCH_POINTS_SUCCESS",N="SERVER_ERROR",C="NO_SERVER_ERROR",_=a(19),R=a.n(_),D="http://konuxdata.getsandbox.com",P={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"},F=function(t){return t({type:y}),R.a.get("".concat(D,"/data")).then((function(e){var a;a=e.data,t({type:E,payload:a})})).catch((function(){t({type:T})}))},A=function(t){return function(e){return e({type:S}),function(t){return R.a.post("".concat(D,"/points"),{data:t},{headers:P})}(t).then((function(){e({type:v,payload:t})})).catch((function(){e({type:g})}))}},I=a(5),w=function(t){return t.appState},k=function(t){return t.points},H=function(t){return t.serverError},L=function(){var t=Object(i.c)(w),e=c.a.useState(new Date),a=Object(m.a)(e,2),r=a[0],o=a[1],l=c.a.useState(50),d=Object(m.a)(l,2),h=d[0],j=d[1],f=Object(i.b)();Object(s.useEffect)((function(){t===I.AppState.ADD_POINT_SUCCESS&&(o(new Date),j(50))}),[t]);return Object(n.jsx)("form",{"data-test":"component-chart-input",children:Object(n.jsx)("div",{className:"p-2 form-container",children:Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsx)("div",{className:"col-md-5",children:Object(n.jsx)(x,{"data-test":"x-date-time-element",label:"Time (X)",value:r,onChange:function(t){o("string"===typeof t?new Date(t):t.toDate())}})}),Object(n.jsx)("div",{className:"col-md-5",children:Object(n.jsx)(b,{"data-test":"y-input-element",label:"Value (Y)",value:h,type:"number",onChange:function(t){return j(parseInt(t))}})}),Object(n.jsxs)("div",{className:"col-md-2",children:[Object(n.jsx)("label",{children:"\xa0"}),Object(n.jsx)("button",{"data-test":"submit-button-element",onClick:function(){f(A({x:u()(r).format(p.dateTimeFormat),y:h}))},className:"btn btn-primary w-100",disabled:t===I.AppState.ADD_POINT||t===I.AppState.FETCH_POINTS,children:"Submit"})]})]})})})},U=a(20),V=function(t){var e=t.orient,a=t.scale,c=t.tickSize,r=t.padding,o=t.ticks,i=t.format,d=t.className,u=t.translate,m=Object(s.useRef)(null);return Object(s.useEffect)((function(){if(m.current){var t="axis".concat(e),n=l[t]().scale(a).tickSize(-c).tickPadding(r);i&&n.tickFormat(i),l.select(m.current).call(n)}}),[e,a,c,r,o,i]),Object(n.jsx)("g",{"data-test":"component-axis",className:d,transform:u,ref:m})},M=function(t){var e=t.scales,a=t.svgDimension,s=t.margins,c={orient:"Bottom",translate:"translate(0,".concat(a.height-s.bottom,")"),scale:e.xScale,tickSize:a.height-s.top-s.bottom,ticks:10,className:"axisBottom",padding:10,format:null},r={orient:"Left",translate:"translate(".concat(s.left,",0)"),scale:e.yScale,tickSize:a.width-s.left-s.right,ticks:10,className:"axisLeft",padding:15,format:l.format("")};return Object(n.jsxs)("g",{"data-test":"component-xy-axis-line-chart",children:[Object(n.jsx)(V,Object(U.a)({"data-test":"x-axis-element"},c)),Object(n.jsx)(V,Object(U.a)({"data-test":"y-axis-element"},r))]})},z=function(t){var e=t.scales,a=t.data,s=e.xScale,c=e.yScale,r=l.line().x((function(t){return s(t.x)})).y((function(t){return c(t.y)})).curve(l.curveMonotoneX),o=Object(n.jsx)("path",{"data-test":"path-element",d:r(a),stroke:"#FFF056",strokeWidth:"3px",fill:"none"});return Object(n.jsx)("g",{"data-test":"component-line",children:o})},X=function(t){var e=t.scales,a=t.data,s=t.svgDimension,c=t.margins,r=e.xScale,o=e.yScale,i=l.area().x((function(t){return r(t.x)})).y0(s.height-c.bottom).y1((function(t){return o(t.y)})).curve(l.curveMonotoneX),d=Object(n.jsxs)("linearGradient",{"data-test":"liner-gradient-element",id:"area-gradient",gradientUnits:"userSpaceOnUse",x1:"0",y1:o(0),x2:"0",y2:o(1e3),children:[Object(n.jsx)("stop",{offset:"0%",stopColor:"#333333",stopOpacity:"0"}),Object(n.jsx)("stop",{offset:"100%",stopColor:"#FFF056",stopOpacity:"0.5"})]}),u=Object(n.jsx)("path",{"data-test":"path-element",d:i(a),className:"area"});return Object(n.jsxs)("g",{"data-test":"component-area",children:[d,u]})},Y=function(t){var e,a,s,c,r,o=t.svgDimension,i=t.scales,d=t.margins,u=t.data,m=i.xScale,h=i.yScale,j=l.bisector((function(t){return t.x})).left,p=m(u[1].x),x=h(u[1].y),b=Object(n.jsxs)("g",{"data-test":"tooltip-element",className:"lineChartTooltip",transform:"translate(".concat(p,",").concat(x,")"),children:[Object(n.jsx)("line",{className:"tooltipHoverLine",y1:"0",y2:o.height-x-d.bottom,stroke:"#FFF056",strokeWidth:"1px",strokeDasharray:"5"}),Object(n.jsx)("circle",{r:"6px",stroke:"#FFF056",strokeWidth:"3px",fill:"#333333"}),Object(n.jsx)("text",{x:"-10",y:"-10",fontSize:"12px",children:u[1].y})]}),f=Object(n.jsx)("rect",{"data-test":"overlay-element",transform:"translate(".concat(d.left,",").concat(d.top,")"),className:"lineChartOverlay",width:o.width-d.left-d.right,height:o.height-d.top-d.bottom,opacity:"0",onMouseMove:function(t){e=m.invert(t.nativeEvent.offsetX),c=j(u,e,1),a=u[c-1],s=u[c],r=e-a.x<s.x-e?a:s,l.select(".lineChartTooltip").attr("transform","translate("+m(r.x)+","+h(r.y)+")"),l.select(".lineChartTooltip line").attr("y2",o.height-h(r.y)-d.bottom),l.select(".lineChartTooltip text").text(r.y)},onMouseOut:function(){l.select(".lineChartTooltip").attr("transform","translate("+p+","+x+")"),l.select(".lineChartTooltip line").attr("y2",o.height-x-d.bottom),l.select(".lineChartTooltip text").text(u[2].y)}});return Object(n.jsxs)("g",{"data-test":"component-tooltip",children:[f,b]})},B=function(t){var e=t.data,a=t.svgDimension,s=t.margins,c=t.xLabel,r=t.yLabel,o={xScale:l.scaleTime().domain(l.extent(e,(function(t){return t.x}))).range([s.left,a.width-s.right]).clamp(!0),yScale:l.scaleTime().domain(l.extent(e,(function(t){return t.y}))).range([a.height-s.top,s.bottom]).clamp(!0)},i=Object(n.jsx)("text",{"data-test":"y-text-element",transform:"translate(60, ".concat(a.height/2,")rotate(-90)"),fontSize:"13",children:r}),d=Object(n.jsx)("text",{"data-test":"x-text-element",transform:"translate(".concat(a.width/2,", ").concat(a.height-10,")"),fontSize:"13",children:c}),u=Object(n.jsx)("rect",{"data-test":"overlay-element",transform:"translate(".concat(s.left/2,",").concat(s.top/2,")"),className:"rectOverlayLineChart",width:a.width-s.right,height:a.height-s.top,rx:"5",ry:"5"});return Object(n.jsxs)("svg",{"data-test":"component-line-chart",className:"lineChartSvg",viewBox:"0 0 ".concat(a.width," ").concat(a.height),preserveAspectRatio:"none",children:[u,d,i,Object(n.jsx)(M,{"data-test":"xy-axis-element",scales:o,margins:s,svgDimension:a}),Object(n.jsx)(z,{"data-test":"line-element",scales:o,data:e}),Object(n.jsx)(X,{"data-test":"area-element",scales:o,data:e,svgDimension:a,margins:s}),Object(n.jsx)(Y,{"data-test":"tooltip-element",svgDimension:a,scales:o,margins:s,data:e})]})},W=function(){var t=p.margins,e={height:p.height,width:p.width},a=Object(i.c)(k),s=Object(i.c)(w),c=l.timeParse("%Y-%m-%dT%H:%M:%S%Z"),r=a.map((function(t){return{x:c(u()(t.x).format()),y:t.y}}));return r.sort((function(t,e){return parseInt(u()(t.x).format("X"))-parseInt(u()(e.x).format("X"))})),Object(n.jsxs)("div",{"data-test":"component-main",className:"d-flex flex-column h-100",children:[Object(n.jsx)("div",{children:Object(n.jsx)(L,{"data-test":"chart-input-element"})}),Object(n.jsx)("div",{className:"flex-1",children:s===I.AppState.FETCH_POINTS?Object(n.jsx)(f,{"data-test":"loader-element"}):a.length?Object(n.jsx)(B,{"data-test":"line-chart-element",data:r,svgDimension:e,margins:t,xLabel:"Time",yLabel:"Value"}):null})]})},G=function(){var t=Object(i.b)(),e=Object(i.c)(H);return Object(s.useEffect)((function(){t(F)}),[t]),Object(n.jsxs)("main",{"data-test":"component-app",className:"d-flex flex-column vh-100",children:[Object(n.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(n.jsx)("a",{className:"navbar-brand",href:"#",children:"Konux chart"})}),e?Object(n.jsx)(O,{"data-test":"toast-message-element",header:"Error!",body:"Server error!",onClose:function(){return t((function(t){t({type:C})}))}}):null,Object(n.jsx)("div",{className:"flex-1",children:Object(n.jsx)(W,{})})]})},J=a(9),Z=a(37),K=I.AppState.NO_STATE,q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return I.AppState.FETCH_POINTS;case T:return I.AppState.FETCH_POINTS_SERVER_ERROR;case E:return I.AppState.FETCH_POINTS_SUCCESS;case S:return I.AppState.ADD_POINT;case g:return I.AppState.ADD_POINT_SERVER_ERROR;case v:return I.AppState.ADD_POINT_SUCCESS;default:return t}},Q=a(14),$=[],tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:return[].concat(Object(Q.a)(t),[e.payload]);case E:return e.payload;default:return t}},et=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g:case T:case N:return!0;case C:return!1;default:return t}},at=Object(J.c)({appState:q,points:tt,serverError:et}),nt=[Z.a],st=J.a.apply(void 0,nt)(J.d)(at),ct=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,73)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,c=e.getLCP,r=e.getTTFB;a(t),n(t),s(t),c(t),r(t)}))};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(i.a,{store:st,children:Object(n.jsx)(G,{})})}),document.getElementById("root")),ct()}},[[72,1,2]]]);
//# sourceMappingURL=main.14aa520b.chunk.js.map